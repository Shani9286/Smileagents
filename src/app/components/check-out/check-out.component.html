<div class="preloader" *ngIf="loading">
	<svg class="cart" role="img" aria-label="Shopping cart line animation" viewBox="0 0 128 128" width="128px" height="128px" xmlns="http://www.w3.org/2000/svg">
		<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8">
			<g class="cart__track" stroke="hsla(0,10%,10%,0.1)">
				<polyline points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" />
				<circle cx="43" cy="111" r="13" />
				<circle cx="102" cy="111" r="13" />
			</g>
			<g class="cart__lines" stroke="currentColor">
				<polyline class="cart__top" points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" stroke-dasharray="338 338" stroke-dashoffset="-338" />
				<g class="cart__wheel1" transform="rotate(-90,43,111)">
					<circle class="cart__wheel-stroke" cx="43" cy="111" r="13" stroke-dasharray="81.68 81.68" stroke-dashoffset="81.68" />
				</g>
				<g class="cart__wheel2" transform="rotate(90,102,111)">
					<circle class="cart__wheel-stroke" cx="102" cy="111" r="13" stroke-dasharray="81.68 81.68" stroke-dashoffset="81.68" />
				</g>
			</g>
		</g>
	</svg>
 
</div>
<section class="page-title" *ngIf="screen == 'checkout'">
    <div class="container">
        <div class="row">
            <div class="col col-xs-12">
                <div class="breadcumb-wrap">
                    <h2>CheckOut</h2>
                    <ol>
                        <li><a routerLink="/"><i class="fa-solid fa-caret-right"></i> Home</a></li>
                        <li>Checkout</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="checkout-area separator-padding" *ngIf="screen == 'checkout'">
    <div class="container">
        <form [formGroup]="checkout_form">
            
            <div class="checkout-wrap">
                <div class="row">
                    <div class="col-lg-6 col-12">
                        <div class="biling-item">
                            <div class="heading-title">
                                <h2>Billing Address</h2>
                            </div>
                            <div class="billing-adress">
                                <div class="contact-form form-style">
                                    <div class="row">
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Name</label>
                                    <input type="text" placeholder="Your  name" name="fname" value="this.user?.name" formControlName="name" >
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Number</label>
                                    <input type="text" placeholder="Your  Number"  value="this.user?.number"  formControlName="number" >
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Email</label>
                                    <input type="text" placeholder="Your  Email" formControlName="email"  value="this.user?.email">
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Country</label>
                                    <input type="text" placeholder="Your  Country" formControlName="country" >
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>City</label>
                                    <input type="text" placeholder="Your  City" formControlName="city" >
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Zip Code</label>
                                    <input type="text" placeholder="Your  Zip Code" formControlName="zip_code" >
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Address</label>
                                    <input type="text" placeholder="Your  Address" formControlName="address" >
                                    </div>
                                    <div class="col-md-12" *ngIf="checkout_form.value.billing_status === 'differentBilling'">
                                    <div class="row">
                                    <div class="col-lg-12 col-md-12 col-12">
                                    <label>Billing Address</label>
                                    <input type="text" placeholder="Your Billing Address" formControlName="billing_address" >
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-12">
                                    <label>Billing Number</label>
                                    <input type="text" placeholder="Your  Billing Number"   formControlName="billing_number" >
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-12">
                                    <label>Billing Email</label>
                                    <input type="text" placeholder="Your  Billing Email" formControlName="billing_email" >
                                    </div>
                                    <div class="col-lg-4 col-md-12 col-12">
                                    <label>Billing Country</label>
                                    <input type="text" placeholder="Your  Billing Country" formControlName="billing_country" >
                                    </div>
                                    <div class="col-lg-4 col-md-12 col-12">
                                    <label>Billing City</label>
                                    <input type="text" placeholder="Your  Billing City" formControlName="billing_city" >
                                    </div>
                                    <div class="col-lg-4 col-md-12 col-12">
                                    <label>Billing Zip Code</label>
                                    <input type="text" placeholder="Your Billing  Zip Code" formControlName="billing_zip_code" >
                                    </div>
                                    </div>
                                    </div>
                                   </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
              
                        <div class="checkout-order-area">
                            <h3>Your Order</h3>
                            <div class="oreder-item">
                               <div class="title bg-title">
                                    <h2>Products <span>Subtotal</span></h2>
                                </div>
                                <div class="oreder-product" *ngFor="let cart of this.cart_data?.temp_order_list">
                                    <div class="images"> <small>{{cart.product.name}}  {{var_name(cart.v_id ?? 0,cart.product)}}</small></div>
                                    <span> SAR   {{ cart.type == 'Single' ? cart.price * cart.qty : cart.price }}</span>
                                </div>
                                <div class="title s1" >
                                    <h2>Delivery Charges<span>SAR 4 </span></h2>
                                </div>
                                
                                <div class="title s2">
                                    <h2>Total<span>SAR {{ totalPrices(cart_data) }} {{totalPrice || '0'}}</span></h2>
                                </div>  

                                <!-- <div class="oreder-product" *ngIf="this.cart_data && this.cart_data.length  != []  ;else noProducts">
                                    <tr *ngFor="let cart of cart_data?.temp_order_list; let i = index" >
                                        <td class="product">
                                            <ul>
                                                <li><img src="{{cart.product?.image}}" alt=""></li>
                                                <li class="first-cart">{{cart.product.name}}  {{var_name(cart.v_id ?? 0,cart.product)}} </li>

                                            </ul>
                                        </td>
                                         
                                         
                                        <td class="price">SAR {{ cart.type == 'Single' ? cart.price * cart.qty : cart.price }}</td>
                                    </tr>
                                </div>
                                <ng-template #noProducts>
                                    <tbody>
                                        <tr>
                                            <td colspan="4" class="text-center">No products in the cart</td>
                                        </tr>
                                    </tbody>
                                </ng-template> -->
                            </div>

                            <div class="payment-option">
                                <h3>Billing Address</h3>
                                <div class="payment-select">
                                    <ul>
                                        <li class="addToggle">
                                            <input 
                                                id="sameAsShipping" 
                                                type="radio" 
                                               
                                                formControlName="billing_status" 
                                                value="sameAsShipping" 
                                                checked>
                                            <label for="sameAsShipping">Same as Shipping Address</label>
                                        </li>
                                        <li class="getwayToggle">
                                            <input 
                                                id="differentBilling" 
                                                type="radio" 
                                                 
                                                formControlName="billing_status" 
                                                value="differentBilling">
                                            <label for="differentBilling">Use a Different Billing Address</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="payment-option">
                                <h3>Dilvery Status</h3>
                                <div class="payment-select">
                                    <ul>
                                        <li class="addToggle">
                                            <input 
                                                id="express_delivery" 
                                                type="radio" 
                                                
                                                formControlName="delivery_status" 
                                                value="express_delivery" 
                                                checked>
                                            <label for="express_delivery">Express Delivery</label>
                                        </li>
                                        <li class="getwayToggle">
                                            <input 
                                                id="standard_delivery" 
                                                type="radio" 
                                              
                                                formControlName="delivery_status" 
                                                value="standard_delivery">
                                            <label for="standard_delivery">Standard Delivery</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="payment-option">
                                <h3>Payment Method</h3>
                                <div class="payment-select">
                                    <ul> 
                                        <li class="addToggle">
                                          <input   formControlName="payment_method" id="add" type="radio"   value="online">
                                          <label for="add">Credit / Debit Card</label>
                                        </li>
                                        <li class="getwayToggle">
                                          <input  formControlName="payment_method" id="getway" type="radio"  value="cash">
                                          <label for="getway">Cash on delivery</label>
                                        </li>

                                      
                                      </ul>
                                      
                                </div>
                                <!--  -->
                                <!-- <form class="mysr-form"></form> -->
                                <div   class="payment-bottom" >
                                     
       
                                    </div>

                                <div class="payment-bottom"   >
                                    <p>Your personal data will be used to process your order, support your experience
                                        throughout this website, and for other purposes described in our privacy policy.
                                    </p>
                                    <div class="payment-btn">
                                     
                                          
                                          <button class="truck-button"  (click)="confirmOrder()" >
                                            <span class="default">Complete Order</span>
                                            <span class="success">
                                                {{mee?.message}}
                                                <svg viewbox="0 0 12 10">
                                                    <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                                                </svg>
                                            </span>
                                            <div class="truck">
                                                <div class="wheel"></div>
                                                <div class="back"></div>
                                                <div class="front"></div>
                                                <div class="box"></div>
                                            </div>
                                        </button>
                                        
                                           
                                        
                                                       </div>                    
                                    
                                    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                                        {{ errorMessage }}
                                      </div>
                                      
                                   
                                </div>
                               
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

       

     
</div></div>


 
 